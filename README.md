## TypeScript Node å…¥é—¨ [![translate-svg]][translate-list]

[translate-svg]: http://llever.com/translate.svg
[translate-list]: https://github.com/chinanf-boy/chinese-translate-list

## æ ¡å¯¹ âœ…

<!-- doc-templite START generated -->
<!-- repo = 'Microsoft/TypeScript-Node-Starter' -->
<!-- commit = 'c8a2c2d40e9f4749cd5e28a41a947da851010179' -->
<!-- time = '2018-7-20' -->

| ç¿»è¯‘çš„åŸæ–‡ | ä¸æ—¥æœŸ       | æœ€æ–°æ›´æ–° | æ›´å¤š                       |
| ---------- | ------------ | -------- | -------------------------- |
| [commit]   | â° 2018-7-20 | ![last]  | [ä¸­æ–‡ç¿»è¯‘][translate-list] |

[last]: https://img.shields.io/github/last-commit/Microsoft/TypeScript-Node-Starter.svg
[commit]: https://github.com/Microsoft/TypeScript-Node-Starter/tree/c8a2c2d40e9f4749cd5e28a41a947da851010179

<!-- doc-templite END generated -->

### è´¡çŒ®

æ¬¢è¿ ğŸ‘ å‹˜è¯¯/æ ¡å¯¹/æ›´æ–°è´¡çŒ® ğŸ˜Š [å…·ä½“è´¡çŒ®è¯·çœ‹](https://github.com/chinanf-boy/chinese-translate-list#è´¡çŒ®)

## ç”Ÿæ´»

[help me live ï¼Œ live need money ğŸ’°](https://github.com/chinanf-boy/live-need-money)

<details>

<summary> <b>ç›®å½• ã€Š__ ^_^ </b> </summary>

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTIONï¼Œ INSTEAD RE-RUN doctoc TO UPDATE -->

- [TypeScript Node Starter](#typescript-node-starter)
- [é¢„å¤‡](#%E9%A2%84%E5%A4%87)
- [å…¥é—¨](#%E5%85%A5%E9%97%A8)
- [éƒ¨ç½²åº”ç”¨ç¨‹åº](#%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F)
  - [é¢„å¤‡å‘å¸ƒ](#%E9%A2%84%E5%A4%87%E5%8F%91%E5%B8%83)
    - [<a name="mlab"></a> ä½¿ç”¨ MongoLab åˆ›å»º æ‰˜ç®¡çš„ MongoDB](#a-namemlaba-%E4%BD%BF%E7%94%A8-mongolab-%E5%88%9B%E5%BB%BA-%E6%89%98%E7%AE%A1%E7%9A%84mongodb)
  - [éƒ¨ç½²åˆ° Azure App Service](#%E9%83%A8%E7%BD%B2%E5%88%B0-azure-app-service)
    - [ç™»å½•æ‚¨çš„ Azure å¸æˆ·](#%E7%99%BB%E5%BD%95%E6%82%A8%E7%9A%84azure%E5%B8%90%E6%88%B7)
    - [æ„å»ºåº”ç”¨ç¨‹åº](#%E6%9E%84%E5%BB%BA%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F)
    - [ä» VS Code è¿›è¡Œ Zip éƒ¨ç½²](#%E4%BB%8Evs-code%E8%BF%9B%E8%A1%8Czip%E9%83%A8%E7%BD%B2)
    - [æ’é™¤æ•…éšœéƒ¨ç½²](#%E6%8E%92%E9%99%A4%E6%95%85%E9%9A%9C%E9%83%A8%E7%BD%B2)
- [TypeScript + Node](#typescript--node)
  - [è·å– TypeScript](#%E8%8E%B7%E5%8F%96typescript)
  - [é¡¹ç›®ç»“æ„](#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84)
  - [å»ºç«‹é¡¹ç›®](#%E5%BB%BA%E7%AB%8B%E9%A1%B9%E7%9B%AE)
    - [é…ç½® TypeScript ç¼–è¯‘](#%E9%85%8D%E7%BD%AEtypescript%E7%BC%96%E8%AF%91)
    - [è¿è¡Œæ„å»º](#%E8%BF%90%E8%A1%8C%E6%9E%84%E5%BB%BA)
  - [ç±»å‹å®šä¹‰ (`.d.ts`) æ–‡ä»¶](#%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89-dts-%E6%96%87%E4%BB%B6)
    - [ä» DefinitelyTyped å®‰è£…`.d.ts`](#%E4%BB%8E-definitelytyped-%E5%AE%89%E8%A3%85dts)
    - [å¦‚æœåº“ä¸åœ¨ DefinitelyTyped ä¸Šæ€ä¹ˆåŠ?](#%E5%A6%82%E6%9E%9C%E5%BA%93%E4%B8%8D%E5%9C%A8-definitelytyped-%E4%B8%8A%E6%80%8E%E4%B9%88%E5%8A%9E)
      - [è®¾ç½® TypeScript è¦æŸ¥æ‰¾çš„`.d.ts`æ˜¯åœ¨å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­](#%E8%AE%BE%E7%BD%AEtypescript-%E8%A6%81%E6%9F%A5%E6%89%BE%E7%9A%84dts%E6%98%AF%E5%9C%A8%E5%8F%A6%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%AD)
      - [ä½¿ç”¨`dts-gen`](#%E4%BD%BF%E7%94%A8dts-gen)
      - [å†™ä¸€ä¸ª`.d.ts`æ–‡ä»¶](#%E5%86%99%E4%B8%80%E4%B8%AAdts%E6%96%87%E4%BB%B6)
      - [è´¡çŒ®äº DefinitelyTyped](#%E8%B4%A1%E7%8C%AE%E4%BA%8Edefinitelytyped)
    - [ç®¡ç†`.d.ts`çš„æ€»ç»“](#%E7%AE%A1%E7%90%86dts%E7%9A%84%E6%80%BB%E7%BB%93)
  - [è°ƒè¯•](#%E8%B0%83%E8%AF%95)
    - [æºæ˜ å°„](#%E6%BA%90%E6%98%A0%E5%B0%84)
      - [é…ç½®æºæ˜ å°„](#%E9%85%8D%E7%BD%AE%E6%BA%90%E6%98%A0%E5%B0%84)
    - [åœ¨ VS Code ä¸­ä½¿ç”¨è°ƒè¯•å™¨](#%E5%9C%A8vs-code%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%B0%83%E8%AF%95%E5%99%A8)
  - [æµ‹è¯•](#%E6%B5%8B%E8%AF%95)
    - [å®‰è£…ç»„ä»¶](#%E5%AE%89%E8%A3%85%E7%BB%84%E4%BB%B6)
    - [é…ç½® Jest](#%E9%85%8D%E7%BD%AEjest)
    - [è¿è¡Œæµ‹è¯•](#%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95)
    - [å†™æµ‹è¯•](#%E5%86%99%E6%B5%8B%E8%AF%95)
  - [TSLint](#tslint)
    - [TSLint è§„åˆ™](#tslint%E8%A7%84%E5%88%99)
    - [è¿è¡Œ TSLint](#%E8%BF%90%E8%A1%8Ctslint)
    - [VSCode æ‰©å±•](#vscode%E6%89%A9%E5%B1%95)
- [ä¾èµ–](#%E4%BE%9D%E8%B5%96)
  - [`dependencies`](#dependencies)
  - [`devDependencies`](#devdependencies)
- [é»‘å®¢é©¬æ‹‰æ¾ å…¥é—¨é¡¹ç›®](#%E9%BB%91%E5%AE%A2%E9%A9%AC%E6%8B%89%E6%9D%BE-%E5%85%A5%E9%97%A8%E9%A1%B9%E7%9B%AE)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

</details>

# TypeScript Node Starter

[![Dependency Status](https://david-dm.org/Microsoft/TypeScript-Node-Starter.svg)](https://david-dm.org/Microsoft/TypeScript-Node-Starter) [![Build Status](https://travis-ci.org/Microsoft/TypeScript-Node-Starter.svg?branch=master)](https://travis-ci.org/Microsoft/TypeScript-Node-Starter)

**ç°åœºæ¼”ç¤º**: <https://typescript-node-starter.azurewebsites.net/>

![image](https://user-images.githubusercontent.com/820883/36764267-abbdb7f8-1be0-11e8-9678-2a9ea448d7f8.png)

æ­¤å­˜å‚¨åº“çš„ä¸»è¦ç›®çš„æ˜¯ï¼Œå±•ç¤ºä¸€ä¸ªè‰¯å¥½çš„ç«¯åˆ°ç«¯é¡¹ç›®è®¾ç½®å’Œå·¥ä½œæµç¨‹ï¼Œä»¥ä¾¿ç”¨ TypeScript ç¼–å†™ Node ä»£ç . æˆ‘å°†å°½å¯èƒ½ä¿æŒæœ€æ–°ï¼Œ ä½†é¼“åŠ± ç¤¾åŒºè´¡çŒ®å’Œæ”¹è¿›å»ºè®®ï¼Œéƒ½éå¸¸æ¬¢è¿.

# é¢„å¤‡

è¦åœ¨æœ¬åœ° æ„å»ºå’Œè¿è¡Œ æ­¤åº”ç”¨ç¨‹åºï¼Œæ‚¨å°†éœ€è¦ä¸€äº›ä¸œè¥¿:

- å®‰è£…[Node.js](https://nodejs.org/en/)
- å®‰è£…[MongoDB](https://docs.mongodb.com/manual/installation/)
- å®‰è£…[VS Code](https://code.visualstudio.com/)

# å…¥é—¨

- Clone æ­¤å­˜å‚¨åº“

```bash
git clone --depth=1 https://github.com/Microsoft/TypeScript-Node-Starter.git <project_name>
```

- å®‰è£…ä¾èµ–é¡¹

```sh
    cd <project_name>
    npm install
```

- é…ç½®æ‚¨çš„ mongoDB æœåŠ¡å™¨

```bash
# åˆ›å»º dbç›®å½•
sudo mkdir -p /data/db
# ç»™ db æ­£ç¡®çš„è¯»/å†™æƒé™
sudo chmod 777 /data/db
```

- å¯åŠ¨ä½ çš„ mongoDB æœåŠ¡å™¨ (ä½ å¯èƒ½æƒ³è¦å¦ä¸€ä¸ªå‘½ä»¤æç¤ºç¬¦)

```
    mongod
```

- æ„å»ºå¹¶è¿è¡Œé¡¹ç›®

```
    npm run build
    npm start
```

æˆ–è€…ï¼Œå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ VS Codeï¼Œåˆ™å¯ä»¥ä½¿ç”¨`cmd + shift + b`è¿è¡Œé»˜è®¤æ„å»ºä»»åŠ¡ (æ˜ å°„åˆ°`npm run build`) ï¼Œç„¶åä½ å¯ä»¥ä½¿ç”¨ å‘½ä»¤è°ƒè‰²æ¿ (`cmd + shift + p`) å¹¶é€‰æ‹©`Tasks: Run Task`>`npm: start` ï¼Œæ¥å¸®ä½ ä½¿ç”¨`npm start`.

> **å…³äºç¼–è¾‘å™¨çš„æ³¨æ„äº‹é¡¹!**- TypeScript å¯¹[æ¯ä¸ªç¼–è¾‘å™¨](http://www.typescriptlang.org/index.html#download-links)éƒ½éå¸¸æ”¯æŒï¼Œ ä½†æ­¤é¡¹ç›®å·²é¢„é…ç½®ä½¿ç”¨[VS Code](https://code.visualstudio.com/). ä¸‹é¢ï¼Œæˆ‘å°†å°è¯•æŒ–æ˜ VS Code çš„å‘å…‰å¤„ï¼Œæˆ–è€… åŠŸèƒ½ç‰¹æ€§çš„ä¼˜åŠ¿.

æœ€åï¼Œå¯¼èˆªåˆ°`http://localhost:3000`ï¼Œä½ åº”è¯¥çœ‹åˆ°åœ¨æœ¬åœ° æä¾›å’Œå‘ˆç° çš„æ¨¡æ¿!

# éƒ¨ç½²åº”ç”¨ç¨‹åº

æœ‰è®¸å¤šæ–¹æ³•å¯ä»¥éƒ¨ç½² Node åº”ç”¨ç¨‹åºï¼Œä¸€èˆ¬è€Œè¨€ï¼Œå°½ç®¡æ‚¨ä½¿ç”¨çš„æ˜¯ TypeScriptï¼Œä½†éƒ¨ç½²è¿‡ç¨‹ä¸ä¼šå‘ç”Ÿä»»ä½•å˜åŒ–. åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘å°†å‘æ‚¨ä»‹ç»å¦‚ä½•ä½¿ç”¨ VS Code ä¸­æä¾›çš„æ‰©å±• å°† æ­¤åº”ç”¨ç¨‹åº éƒ¨ç½²åˆ° Azure App Serviceï¼Œå› ä¸ºæˆ‘è®¤ä¸ºè¿™æ˜¯æœ€ç®€å•ï¼Œæœ€å¿«é€Ÿçš„å…¥é—¨æ–¹å¼ï¼Œä»¥åŠ æ˜¯å¼€å‘äººå‘˜æœ€å‹å¥½çš„å·¥ä½œæµç¨‹å…‰æ™¯äº†.

## é¢„å¤‡å·¥ä½œ

- [**Azure è´¦å·**](https://azure.microsoft.com/en-us/free/)- å¦‚æœæ‚¨æ²¡æœ‰ï¼Œå¯ä»¥å…è´¹æ³¨å†Œ. Azure å…è´¹å¥—é¤ä¸ºæ‚¨æä¾›äº†å¤§é‡èµ„æºï¼ŒåŒ…æ‹¬æœ€å¤š 10 ä¸ª App Service å®ä¾‹ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬å°†è¦ä½¿ç”¨çš„å®ä¾‹.

> ä¸€èˆ¬ï¼Œ ä¸­å›½å¤§é™†ç”¨æˆ·è‹¥æ²¡æœ‰`Visa å’Œ MasterCard`ä¿¡ç”¨å¡ï¼Œæ˜¯æ³¨å†Œä¸äº†çš„ _2018 7.24_ ï¼Œé‚£ä¹ˆä½ å¯ä»¥æƒ³ç›´æ¥è·³åˆ° [TypeScript ä¸ Node](#typescript--node)

- [**VS Code**](https://code.visualstudio.com/)- æˆ‘ä»¬å°†ä½¿ç”¨ VS Code æä¾›çš„ç•Œé¢æ¥å¿«é€Ÿéƒ¨ç½²æˆ‘ä»¬çš„åº”ç”¨ç¨‹åº.
- [**Azure App Service VS Code æ‰©å±•**](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azureappservice)- åœ¨ VS Code ä¸­ï¼Œåœ¨æ‰©å±•å¸‚åœºä¸­ (æœ€å·¦ä¾§èœå•æ ä¸Šçš„ç¬¬ 5 ä¸ªæŒ‰é’®) æœç´¢`Azure App Service` ï¼Œå®‰è£…æ‰©å±•ï¼Œç„¶åé‡æ–°åŠ è½½ VS Code.
- **åˆ›å»ºäº‘æ•°æ®åº“**- å¯¹äºæœ¬åœ°å¼€å‘ï¼Œåœ¨ æœ¬æœºä¸Š å¯ä»¥å¾ˆå¥½è¿è¡Œ MongoDB ï¼Œä½†æ˜¯ä¸€æ—¦éƒ¨ç½²ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…·æœ‰é«˜å¯ç”¨æ€§çš„æ•°æ®åº“. å®ç°æ­¤ç›®çš„çš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨æ‰˜ç®¡äº‘æ•°æ®åº“. æœ‰è®¸å¤šä¸åŒçš„æä¾›å•†ï¼Œä½†æœ€å®¹æ˜“ä¸Šæ‰‹çš„æ˜¯[MongoLab](#mlab).

### <a name="mlab"></a> ä½¿ç”¨ MongoLab åˆ›å»º æ‰˜ç®¡çš„ MongoDB

1.  å¯¼èˆª[MongoLab's Website](https://mlab.com/)ï¼Œæ³¨å†Œä¸€ä¸ªå…è´¹å¸æˆ·ï¼Œç„¶åç™»å½•.
2.  åœ¨é‡Œé¢ **MongoDB éƒ¨ç½²**éƒ¨åˆ†ï¼Œå•å‡» **åˆ›å»ºæ–°çš„**æŒ‰é’®.
3.  é€‰æ‹©ä»»ä½•æä¾›å•† (æˆ‘æ¨è **Microsoft Azure**å› ä¸ºå®ƒæä¾›äº†ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•æ¥å‡çº§åˆ°å…¨çƒåˆ†å¸ƒå¼å®ä¾‹.

4.  é€‰æ‹©**Sandbox**ä¿æŒè‡ªç”±ï¼Œé™¤éä½ çŸ¥é“ä½ åœ¨åšä»€ä¹ˆï¼Œç„¶åç‚¹å‡» **ç»§ç»­**.

5.  é€‰æ‹©ä¸€ä¸ªåœ°åŒº (æˆ‘å»ºè®®åœ°ç†ä½ç½®æœ€æ¥è¿‘æ‚¨åº”ç”¨ç”¨æˆ·çš„åœ°åŒº) .

6.  æ·»åŠ åç§°ï¼Œå•å‡»**ç»§ç»­**å†æ¬¡ï¼Œæœ€å**æäº¤è®¢å•**.

7.  åˆ›å»ºæ–°æ•°æ®åº“åï¼Œä»ä¸­é€‰æ‹©å®ƒ**MongoDB Deployments**éƒ¨åˆ†.

8.  é€‰æ‹©åˆ›å»ºç”¨æˆ·**ç”¨æˆ·**é€‰é¡¹å¡ï¼Œå•å‡»**æ·»åŠ æ•°æ®åº“ç”¨æˆ·**æŒ‰é’®ï¼Œæ·»åŠ ç”¨æˆ·åå’Œå¯†ç ï¼Œç„¶åå•å‡»**åˆ›å»º**. è¿æ¥åˆ°æ•°æ®åº“éœ€è¦ç”¨æˆ·å¸æˆ·ï¼Œå› æ­¤è¯·è®°ä½è¿™äº›å€¼ï¼Œå› ä¸ºæ‚¨éœ€è¦å°†å®ƒä»¬ä½œä¸ºè¿æ¥å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†.

9.  ä»é¡µé¢é¡¶éƒ¨å¤åˆ¶è¿æ¥å­—ç¬¦ä¸²ï¼Œå®ƒåº”å¦‚ä¸‹æ‰€ç¤º: `mongodb://<dbuser>:<dbpassword>@ds036069.mlab.com:36069/test-asdf`å¹¶æ›¿æ¢`<dbUser>`å’Œ`<dbpassword>`ä½¿ç”¨æ‚¨åˆšåˆšåˆ›å»ºçš„å‡­æ®. å›åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œæ‰“å¼€ä½ çš„`.env`æ–‡ä»¶å’Œæ›´æ–°`MONGODB_URI`ä½¿ç”¨æ–°çš„è¿æ¥å­—ç¬¦ä¸².

> æ³¨æ„ï¼ - å¦‚æœä½ è¿˜æ²¡æœ‰`.env`æ–‡ä»¶ï¼Œè¯·å°†`.env.example`é‡å‘½åä¸º`.env`å¹¶æŒ‰ç…§æ³¨é‡Šæ›´æ–°è¯¥æ–‡ä»¶ä¸­çš„å€¼

10. **æˆåŠŸ!** æ‚¨å¯ä»¥é€šè¿‡æ›´æ–°`MONGODB_URI_LOCAL`åˆ° æ‚¨åˆšåˆšæ›´æ–°çš„ç›¸åŒè¿æ¥å­—ç¬¦ä¸²`MONGO_URI`ï¼Œæ¥æµ‹è¯•å®ƒæ˜¯å¦åœ¨æœ¬åœ°å·¥ä½œ. åœ¨ é‡å»º/æœåŠ¡ä¸­ åï¼Œåº”ç”¨ç¨‹åºåº”è¯¥å¯ä»¥å·¥ä½œï¼Œä½†ä»¥å‰åœ¨æœ¬åœ°æµ‹è¯•ä¸­åˆ›å»ºçš„ç”¨æˆ·å°†ä¸ä¼šå­˜åœ¨äºæ–°æ•°æ®åº“ä¸­! åˆ«å¿˜äº†å½’è¿˜`MONGO_URI_LOCAL`åˆ°ä½ å½“åœ°çš„æµ‹è¯•æ•°æ®åº“ (å¦‚æœä½ æ„¿æ„çš„è¯) .

## éƒ¨ç½²åˆ° Azure App Service

ä» VS Code éƒ¨ç½² å¯ä»¥åˆ†ä¸ºä»¥ä¸‹æ­¥éª¤:

1. åœ¨ VS Code ä¸­éªŒè¯æ‚¨çš„ Azure å¸æˆ·

2. æ„å»ºæ‚¨çš„åº”ç”¨ç¨‹åº

3. ä½¿ç”¨ Azure App Service æ‰©å±•è¿›è¡Œ Zipå‹ç¼© éƒ¨ç½²

### ç™»å½•æ‚¨çš„ Azure å¸æˆ·

1.  æ‰“å¼€ VS Code

2.  å±•å¼€èµ„æºç®¡ç†å™¨èœå•ä¸­çš„ Azure App Service èœå•
    - å¦‚æœä½ æ²¡æœ‰çœ‹åˆ°è¿™ä¸ªï¼Œä½ å¯èƒ½æ²¡æœ‰
    - æ‰©å±•å®‰è£…. `Azure App Service`è¯·å‚é˜… é¢„å¤‡å·¥ä½œ éƒ¨åˆ†.
3.  ç‚¹å‡»`Sign in to Azure...`
4.  é€‰æ‹©`Copy & Open`ä»ç»“æœå¯¹è¯æ¡†ä¸­
    - è¿™å°†æ‰“å¼€`aka.ms/devicelogin`åœ¨æµè§ˆå™¨çª—å£ä¸­. å¦‚æœæ²¡æœ‰ï¼Œåªéœ€æ‰‹åŠ¨å¯¼èˆªå³å¯.
5.  ç²˜è´´åˆ°å‰ªè´´æ¿ä¸Šçš„ä»£ç ä¸­.
6.  å›åˆ° VS Codeï¼Œæ‚¨ç°åœ¨åº”è¯¥å·²ç™»å½•. æ‚¨å¯ä»¥é€šè¿‡æµè§ˆå™¨çª—å£çš„ Azure App Service éƒ¨åˆ†ä¸­ï¼Œåˆ—å‡ºçš„ Azure è®¢é˜… æ¥ç¡®è®¤ä¸€åˆ‡æ­£å¸¸. æ­¤å¤–ï¼Œæ‚¨åº”è¯¥ä¼šåœ¨ VS Code åº•éƒ¨çš„çŠ¶æ€æ ä¸­çœ‹åˆ°ä¸æ‚¨çš„å¸æˆ·å…³è”çš„ç”µå­é‚®ä»¶.

### æ„å»ºåº”ç”¨ç¨‹åº

åœ¨ zipéƒ¨ç½² ä¹‹å‰ï¼Œéœ€è¦åœ¨æœ¬åœ°æ„å»ºåº”ç”¨ç¨‹åºï¼Œå› ä¸º App Service ä¸ä¼šæ‰§è¡Œæ„å»ºä»»åŠ¡.

æŒ‰ç…§é€šå¸¸çš„æ–¹å¼æ„å»ºåº”ç”¨ç¨‹åº: - å¯åŠ¨ VS Code ä¸­çš„é»˜è®¤æ„å»º

- `ctrl + shift + b`æ‰§è¡Œ
- ä»ç»ˆç«¯çª—å£`npm run build`

### ä» VS Code è¿›è¡Œ Zipéƒ¨ç½²

1. ç¡®ä¿æ‚¨çš„åº”ç”¨å·²æ„å»ºï¼Œæ‚¨ç›®å‰`node_modules`å’Œ`dist`æ–‡ä»¶å¤¹å°†æ˜¯éƒ¨ç½²çš„åº”ç”¨ç¨‹åº.

2. å•å‡»èµ„æºç®¡ç†å™¨çª—å£çš„ Azure App Service éƒ¨åˆ†ä¸Šçš„è“è‰²å‘ä¸Šç®­å¤´ (Deploy to Web App) .
3. é€‰æ‹©æ•´ä¸ªé¡¹ç›®ç›®å½•. å¦‚æœæ‚¨è¿˜æ²¡æœ‰æ›´æ”¹åç§°ï¼Œè¿™å°†æ˜¯`TypeScript-Node-Starter`

4. é€‰æ‹©æ‚¨æƒ³è¦å°†æ­¤åº”ç”¨ç¨‹åºä»˜è´¹çš„è®¢é˜… (ä¸ç”¨æ‹…å¿ƒï¼Œå®ƒå°†æ˜¯å…è´¹çš„) å‘µå‘µ.

5. é€‰æ‹© `Create New Web App`

6. è¾“å…¥ä¸€ä¸ªå…¨çƒå”¯ä¸€çš„åç§° - è¿™å°†æ˜¯ azure ç”Ÿæˆçš„ URL çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤å®ƒå¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œä½†å¦‚æœæ‚¨è®¡åˆ’ç¨åæ·»åŠ è‡ªå®šä¹‰åŸŸï¼Œé‚£å®ƒå¹¶ä¸é‡è¦.æˆ‘é€šå¸¸åªæ˜¯åœ¨åº”ç”¨åç§°çš„æœ«å°¾æ·»åŠ éšæœºæ•°ï¼Œä¾‹: typescript-node-starter-15121214.

7. é€‰æ‹©èµ„æºç»„ - å¦‚æœæ‚¨ä¸çŸ¥é“è¿™æ˜¯ä»€ä¹ˆï¼Œåªéœ€åˆ›å»ºä¸€ä¸ªæ–°èµ„æº. å¦‚æœæ‚¨æœ‰è®¸å¤šäº‘èµ„æºåº”è¯¥åœ¨é€»è¾‘ä¸Šç»„åˆåœ¨ä¸€èµ· (æƒ³æƒ³åº”ç”¨ç¨‹åºæœåŠ¡å’Œæ”¯æŒè¯¥åº”ç”¨ç¨‹åºçš„æ•°æ®åº“) ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½å¸Œæœ›å°†å®ƒä»¬æ”¾åœ¨åŒä¸€ä¸ªèµ„æºç»„ä¸­. è¿™å¯ä»¥éšåæ›´æ–°. å¦‚æœæ‚¨åˆ›å»ºæ–°èµ„æºç»„ï¼Œç³»ç»Ÿè¿˜ä¼šæç¤ºæ‚¨ä¸ºè¯¥ç»„é€‰æ‹©ä¸€ä¸ªä½ç½®. é€‰æ‹©åœ°ç†ä½ç½®é è¿‘ç”¨æˆ·æ‰€åœ¨ä½ç½®çš„åœ°æ–¹.

8. é€‰æ‹©`Create new App Service Plan`- åº”ç”¨æœåŠ¡è®¡åˆ’ä¸»è¦å†³å®šæ‚¨çš„åº”ç”¨è¿è¡Œç¡¬ä»¶çš„å¤§å°å’Œæˆæœ¬ï¼Œä½†å®ƒè¿˜ç®¡ç†ä¸€äº›æˆ‘ä»¬ç°åœ¨å¯ä»¥å¿½ç•¥çš„å…¶ä»–è®¾ç½®.

9. é€‰æ‹©`B1 - Basic`è¿™ä¸ªæ˜¯å…è´¹çš„. å¦‚æœæ‚¨çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆï¼Œè¯·éšæ„é€‰æ‹©æ›´å¼ºçš„å®šä»·ç­‰çº§.

10. é€‰æ‹©ç›®æ ‡ Node ç‰ˆæœ¬ - æˆ‘ä»¬æ­£åœ¨éƒ¨ç½²åˆ° Linux æœºå™¨ï¼Œæ­¤å¤–æˆ‘ä»¬å¯ä»¥é€‰æ‹©æˆ‘ä»¬æƒ³è¦çš„ç¡®åˆ‡ Node. å¦‚æœæ‚¨ä¸çŸ¥é“è‡ªå·±æƒ³è¦ä»€ä¹ˆï¼Œè¯·é€‰æ‹©å½“å‰ LTS æ„å»ºçš„å†…å®¹.

11. æ‹¿ä¸€æ¯å’–å•¡ - ä½ ä¼šçœ‹åˆ°ä½ åˆšåˆšé€‰æ‹©çš„æ‰€æœ‰ä¸œè¥¿éƒ½åœ¨è¾“å‡ºçª—å£ä¸­åˆ›å»º. æ‰€æœ‰è¿™ä¸€åˆ‡éƒ½æ˜¯ç”±[Azure CLI](https://docs.microsoft.com/en-us/cli/azure/overview?view=azure-cli-latest)ï¼Œå¦‚æœæ‚¨å†³å®šè¦è‡ªå®šä¹‰æ­¤è¿‡ç¨‹ï¼Œå¯ä»¥è‡ªè¡Œå¤åˆ». æ­¤éƒ¨ç½²ä¸æ˜¯æœ€å¿«çš„é€‰æ‹© (ä½†å®ƒæ˜¯æœ€ç®€å•çš„!) .æˆ‘ä»¬å®é™…ä¸Š æ†ç»‘äº†é¡¹ç›®ä¸­çš„æ‰€æœ‰å†…å®¹ (åŒ…æ‹¬å¤§é‡çš„ node_modules æ–‡ä»¶å¤¹) å¹¶å°†å…¶ä¸Šä¼ åˆ°æˆ‘ä»¬çš„ Azure åº”ç”¨æœåŠ¡ä¸­. æ—¶é—´ä¼šæœ‰æ‰€ä¸åŒï¼Œä½†ä½œä¸ºåŸºå‡†ï¼Œæˆ‘çš„éƒ¨ç½²å¤§çº¦éœ€è¦ 6 åˆ†é’Ÿ.

12. æ·»åŠ `NODE_ENV`ç¯å¢ƒå˜é‡ - åœ¨èµ„æºç®¡ç†å™¨çª—å£çš„"åº”ç”¨ç¨‹åºæœåŠ¡"éƒ¨åˆ†ä¸­ï¼Œå±•å¼€æ–°åˆ›å»ºçš„æœåŠ¡ï¼Œå³é”®å•å‡» **åº”ç”¨ç¨‹åºè®¾ç½®**ï¼Œ é€‰æ‹© **æ·»åŠ æ–°è®¾ç½®...**ï¼Œå¹¶æ·»åŠ `NODE_ENV:production`.
    æ­¤è®¾ç½®ç¡®å®šè¦æŒ‡å‘çš„æ•°æ®åº“. å¦‚æœæ‚¨å°šæœªåˆ›å»ºäº‘æ•°æ®åº“ï¼Œè¯·å‚é˜…[å®‰è£…æŒ‡å—](#mlab).
13. å¥½äº†! å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæ‚¨åº”è¯¥çœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„é¡µé¢: [TypeScript Node Starter Demo Site](https://typescript-node-starter.azurewebsites.net/)

### æ’é™¤æ•…éšœéƒ¨ç½²

éƒ¨ç½²å¯èƒ½ç”±äºå„ç§åŸå› è€Œå¤±è´¥ï¼Œå¦‚æœæ‚¨é‡åˆ°ä¸€ä¸ªè¯´æ˜çš„é¡µé¢*æš‚åœæœåŠ¡*æˆ–å…¶ä»–ä¸€äº›é”™è¯¯ï¼Œ[æ‰“å¼€ issue](https://github.com/Microsoft/TypeScript-Node-Starter/issues/new)ï¼Œæˆ‘ä¼šå°½åŠ›å¸®ä½ è§£å†³é—®é¢˜.

# TypeScript + Node

åœ¨æ¥ä¸‹æ¥çš„å‡ èŠ‚ä¸­ï¼Œæˆ‘å°†å±•ç¤ºå°† TypeScript æ·»åŠ åˆ° Express é¡¹ç›®åå‘ç”Ÿçš„æ‰€æœ‰å˜åŒ–. è¯·æ³¨æ„ï¼Œæ‰€æœ‰è¿™äº›éƒ½å·²ç»ä¸ºæ­¤é¡¹ç›®è®¾ç½®å¥½äº†ï¼Œä½†å¯ä»¥å°†å…¶ç”¨ä½œ Node.js é¡¹ç›®è½¬æ¢ä¸º TypeScript çš„å‚è€ƒ.

## è·å– TypeScript

TypeScript æœ¬èº«å¾ˆå®¹æ˜“æ·»åŠ åˆ°ä»»ä½•é¡¹ç›®ä¸­`npm`.

```
    npm install -D typescript
```

å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ VS Code é‚£ä¹ˆä½ å¾ˆé«˜å…´! VS Code å°†æ£€æµ‹å¹¶ä½¿ç”¨æ‚¨å®‰è£…åœ¨`node_modules`ä¸­çš„ TypeScript ç‰ˆæœ¬. å¯¹äºå…¶ä»–ç¼–è¾‘å™¨ï¼Œè¯·ç¡®ä¿æ‚¨æœ‰ç›¸åº”çš„ç¼–è¾‘å™¨çš„[TypeScript æ’ä»¶](http://www.typescriptlang.org/index.html#download-links).

## é¡¹ç›®ç»“æ„

TypeScript + Node é¡¹ç›® ä¸­æœ€æ˜æ˜¾çš„åŒºåˆ«æ˜¯ æ–‡ä»¶å¤¹ç»“æ„. åœ¨ TypeScript é¡¹ç›®ä¸­ï¼Œæœ€å¥½åˆ†å¼€*æº-source*å’Œ *åˆ†é…-dist*æ–‡ä»¶. TypeScript (`.ts`) æ–‡ä»¶ä½åœ¨ä½ çš„`src`æ–‡ä»¶å¤¹ï¼Œç„¶åç¼–è¯‘è¾“å‡ºä¸º JavaScript (`.js`) åœ¨`dist`é‡Œé¢. è¯¥`test`å’Œ`views`æ–‡ä»¶å¤¹æŒ‰é¢„æœŸä¿æŒæœ€é«˜æ°´å¹³.

æ­¤åº”ç”¨ç¨‹åºçš„å®Œæ•´æ–‡ä»¶å¤¹ç»“æ„è§£é‡Šå¦‚ä¸‹:

> **æ³¨æ„!** ç¡®ä¿æ‚¨å·²ç»ä½¿ç”¨`npm run build`æ„å»ºäº†åº”ç”¨ç¨‹åº

| åç§°                 | æè¿°                                                                                                                                          |
| -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| **.vscode**          | åŒ…å« VS Code ç‰¹å®šè®¾ç½®                                                                                                                         |
| **dist**             | åŒ…å« TypeScript æ„å»ºä¸­çš„å¯åˆ†å‘ (æˆ–è¾“å‡º) . è¿™æ˜¯æ‚¨å‘å¸ƒçš„ä»£ç                                                                                     |
| **node_modules**     | åŒ…å«æ‰€æœ‰ npm ä¾èµ–é¡¹                                                                                                                           |
| **src**              | åŒ…å«å°†ç¼–è¯‘åˆ° dist ç›®å½•çš„æºä»£ç                                                                                                                 |
| **src/config**       | Passport èº«ä»½éªŒè¯ç­–ç•¥å’Œç™»å½•ä¸­é—´ä»¶. åœ¨æ­¤æ·»åŠ å…¶ä»–å¤æ‚çš„é…ç½®ä»£ç                                                                                  |
| **src/controllers**  | æ§åˆ¶å™¨å®šä¹‰å“åº”å„ç§ http è¯·æ±‚çš„å‡½æ•°                                                                                                            |
| **src/models**       | æ¨¡å‹å®šä¹‰ Mongoose æ¨¡å¼ï¼Œç”¨äºå­˜å‚¨å’Œæ£€ç´¢ MongoDB ä¸­çš„æ•°æ®                                                                                        |
| **src/public**       | å°†åœ¨å®¢æˆ·ç«¯ä½¿ç”¨çš„é™æ€èµ„äº§                                                                                                                      |
| **src/types**        | ä¿ç•™åœ¨ DefinitelyTyped ä¸Šæ‰¾ä¸åˆ°çš„.d.ts æ–‡ä»¶. åœ¨æ­¤æ›´å¤šåœ°æ¶µç›–[section](#%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89-dts-%E6%96%87%E4%BB%B6)            |
| **src**/server.ts    | è¿›å…¥å¿«é€’åº”ç”¨çš„å…¥å£ç‚¹                                                                                                                          |
| **test**             | åŒ…å«æ‚¨çš„æµ‹è¯•. ä»æºä»£ç ä¸­åˆ†ç¦»ï¼Œå› ä¸ºå­˜åœ¨ä¸åŒçš„æ„å»ºè¿‡ç¨‹.                                                                                          |
| **views**            | è§†å›¾å®šä¹‰æ‚¨çš„åº”ç”¨åœ¨å®¢æˆ·ç«¯ä¸Šçš„å‘ˆç°æ–¹å¼. åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ pug                                                                           |
| .env.example         | API å¯†é’¥ï¼Œä»¤ç‰Œï¼Œå¯†ç ï¼Œæ•°æ®åº“ URI. å…‹éš†è¿™ä¸ªï¼Œä½†ä¸è¦ç­¾å®ƒåˆ°å…¬å…±å›è´­.                                                                               |
| .travis.yml          | ç”¨äºé…ç½® Travis CI æ„å»º                                                                                                                       |
| .copyStaticAssets.ts | æ„å»ºå°†å›¾åƒï¼Œå­—ä½“å’Œ JS åº“å¤åˆ¶åˆ° dist æ–‡ä»¶å¤¹çš„è„šæœ¬                                                                                               |
| jest.config.js       | ç”¨äºé…ç½® Jest                                                                                                                                 |
|  package.json      | åŒ…å« npm ä¾èµ–é¡¹çš„æ–‡ä»¶ä»¥åŠ[build scripts](#%E5%A6%82%E6%9E%9C%E5%BA%93%E4%B8%8D%E5%9C%A8-definitelytyped-%E4%B8%8A%E6%80%8E%E4%B9%88%E5%8A%9E) |
| tsconfig.json        | é…ç½®ç”¨äºç¼–è¯‘ç”¨ TypeScript ç¼–å†™çš„æœåŠ¡å™¨ä»£ç çš„è®¾ç½®                                                                                              |
| tsconfig.tests.json  | é…ç½®ç”¨äºç¼–è¯‘ç”¨ TypeScript ç¼–å†™çš„æµ‹è¯•çš„è®¾ç½®                                                                                                    |
| tslint.json          | é…ç½® TSLint ä»£ç æ ·å¼æ£€æŸ¥çš„è®¾ç½®                                                                                                                |

## å»ºç«‹é¡¹ç›®

ç°åœ¨å¾ˆå°‘æœ‰ JavaScript é¡¹ç›® æ²¡æœ‰æŸç§æ„å»ºç®¡é“ï¼Œä½†æ˜¯ Node é¡¹ç›®é€šå¸¸å…·æœ‰æœ€å°‘é‡çš„æ„å»ºé…ç½®. å› æ­¤ï¼Œæˆ‘è¯•å›¾å°½å¯èƒ½ç®€åŒ–æ„å»º. å¦‚æœæ‚¨æ‹…å¿ƒç¼–è¯‘æ—¶é—´ï¼Œä¸»è¦ç›‘è§†ä»»åŠ¡éœ€è¦ å¤§çº¦ 2 ç§’ æ‰èƒ½åˆ·æ–°.

### é…ç½® TypeScript ç¼–è¯‘

TypeScript ä½¿ç”¨è¯¥æ–‡ä»¶`tsconfig.json`è°ƒæ•´é¡¹ç›®ç¼–è¯‘é€‰é¡¹. è®©æˆ‘ä»¬å‰–æä¸€ä¸‹è¿™ä¸ª`tsconfig.json`ï¼Œä»`compilerOptions`å¼€å§‹è¯¦ç»†ä»‹ç»å¦‚ä½•ç¼–è¯‘é¡¹ç›®.

```json
    "compilerOptions": {
        "module": "commonjs",
        "esModuleInterop": true,
        "target": "es6",
        "noImplicitAny": true,
        "moduleResolution": "node",
        "sourceMap": true,
        "outDir": "dist",
        "baseUrl": ".",
        "paths": {
            "*": [
                "node_modules/*",
                "src/types/*"
            ]
        }
    },
```

| `compilerOptions`            | æè¿°                                                                                                                               |
| ---------------------------- | ---------------------------------------------------------------------------------------------------------------------------------- |
| `"module": "commonjs"`       | è¯¥**è¾“å‡º**æ¨¡å—ç±»å‹ (åœ¨ä½ çš„`.js`æ–‡ä»¶) . Node ä½¿ç”¨ commonjsï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„                                                         |
| `"esModuleInterop": trueï¼Œ`   | å…è®¸ä½¿ç”¨å¤‡ç”¨æ¨¡å—å¯¼å…¥è¯­æ³•: `import foo from 'foo';`                                                                                 |
| `"target": "es6"`            | è¾“å‡ºè¯­è¨€çº§åˆ«. Node æ”¯æŒ ES6ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œå®šä½                                                                                 |
| `"noImplicitAny": true`      | å¯ç”¨æ›´ä¸¥æ ¼çš„è®¾ç½®ï¼Œå½“æŸäº›å†…å®¹å‡ºç°é»˜è®¤`any`å€¼è®¾ç½®æ—¶ä¼šæŠ›å‡ºé”™è¯¯                                                                         |
| `"moduleResolution": "node"` | TypeScript å°è¯•æ¨¡ä»¿ Node çš„æ¨¡å—è§£æç­–ç•¥. é˜…è¯»æ›´å¤š [here](https://www.typescriptlang.org/docs/handbook/module-resolution.html#node) |
| `"sourceMap": true`          | æˆ‘ä»¬å¸Œæœ›åœ¨æˆ‘ä»¬çš„ JavaScript æ—è¾¹è¾“å‡ºæºæ˜ å°„.è§[è°ƒè¯•](#è°ƒè¯•)éƒ¨åˆ†                                                           |
| `"outDir": "dist"`           | ç¼–è¯‘åçš„`.js`æ–‡ä»¶è¾“å‡ºä½ç½®.                                                                                           |
| `"baseUrl": "."`             | é…ç½®æ¨¡å—å¤„ç†çš„ä¸€éƒ¨åˆ†. æŸ¥çœ‹[è·¯å¾„æ˜ å°„ç« èŠ‚](#%E4%BB%8E-definitelytyped-%E5%AE%89%E8%A3%85dts))                                      |
| `paths: {...}`               | é…ç½®æ¨¡å—å¤„ç†çš„ä¸€éƒ¨åˆ†. æŸ¥çœ‹ [è·¯å¾„æ˜ å°„ç« èŠ‚](#%E4%BB%8E-definitelytyped-%E5%AE%89%E8%A3%85dts))                    |

æ–‡ä»¶çš„å…¶ä½™éƒ¨åˆ†å®šä¹‰TypeScripté¡¹ç›®ä¸Šä¸‹æ–‡ï¼Œé¡¹ç›®ä¸Šä¸‹æ–‡åŸºæœ¬ä¸Šæ˜¯ä¸€ç»„é€‰é¡¹ï¼Œç”¨äºç¡®å®šåœ¨ç¼–è¯‘å™¨ä½¿ç”¨æ—¶ä¼šç¼–è¯‘ å“ªäº›æ–‡ä»¶ï¼Œç”±`tsconfig.json`æŒ‡å®š. åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹å†…å®¹ï¼Œæ¥å®šä¹‰é¡¹ç›®ä¸Šä¸‹æ–‡: .

```json
    "include": [
        "src/**/*"
    ]
```

`include`æ˜¯ä¸€ç»„ glob æ¨¡å¼çš„æ–‡ä»¶ï¼Œæ—¨è¢«åŒ…å«åœ¨ç¼–è¯‘ä¸­ï¼Œè¿™ä¸ªé¡¹ç›®éå¸¸ç®€å•ï¼Œæ‰€æœ‰çš„`.ts` æ–‡ä»¶éƒ½åœ¨`src`. å¯¹äºæ›´å¤æ‚çš„è®¾ç½®ï¼Œæ‚¨å¯ä»¥`exclude`ä¸€ç»„ glob æ¨¡å¼ï¼Œç”¨äºä»å®šä¹‰çš„`include`é›†åˆä¸­åˆ é™¤ç‰¹å®šæ–‡ä»¶. è¿˜æœ‰ä¸€ä¸ªé€‰é¡¹`files`ï¼Œå®ƒé‡‡ç”¨ä¸€ç»„èƒ½è¦†ç›–`exclude`å’Œ`include`çš„å•ä¸ªæ–‡ä»¶å.

### è¿è¡Œæ„å»º

æ‰€æœ‰ä¸åŒçš„æ„å»ºæ­¥éª¤éƒ½æ˜¯é€šè¿‡[npm scripts](https://docs.npmjs.com/misc/scripts)ç¼–æ’åè°ƒçš„. Npm è„šæœ¬åŸºæœ¬ä¸Šå…è®¸æˆ‘ä»¬é€šè¿‡ npm è°ƒç”¨ (å’Œé“¾æ¥) ç»ˆç«¯å‘½ä»¤. è¿™å¾ˆå¥½ï¼Œå› ä¸ºå¤§å¤šæ•° JavaScript å·¥å…·éƒ½æœ‰æ˜“äºä½¿ç”¨çš„å‘½ä»¤è¡Œå®ç”¨ç¨‹åºï¼Œä½¿æˆ‘ä»¬ä¸éœ€è¦`gruntæˆ–gulp`æ¥ç®¡ç†æˆ‘ä»¬çš„æ„å»º. å¦‚æœä½ æ‰“å¼€`package.json`ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªåŒ…å«æ‚¨å¯ä»¥è°ƒç”¨çš„æ‰€æœ‰ä¸åŒè„šæœ¬çš„`scripts`éƒ¨åˆ†. è¦è°ƒç”¨è„šæœ¬ï¼Œåªéœ€è¿è¡Œ`npm run <script-name>`å³å¯ä»å‘½ä»¤è¡Œ. æ‚¨ä¼šæ³¨æ„åˆ° npm è„šæœ¬å¯ä»¥ç›¸äº’è°ƒç”¨ï¼Œè¿™ä½¿å¾—ä»ç®€å•çš„å•ä¸ªæ„å»ºè„šæœ¬ä¸­ç»„åˆå¤æ‚çš„æ„å»ºå˜å¾—å®¹æ˜“. ä»¥ä¸‹æ˜¯æ­¤æ¨¡æ¿å¯ç”¨çš„æ‰€æœ‰è„šæœ¬çš„åˆ—è¡¨:

| æè¿°                 | ä¸'npm run serve'ç›¸åŒ.                                                               |
| -------------------- | ------------------------------------------------------------------------------------ |
| `start`              | å¯ä»¥è°ƒç”¨`npm start`                                                                  |
| `build`              | å®Œæ•´çš„æ„å»º. è¿è¡Œæ‰€æœ‰æ„å»ºä»»åŠ¡ (`build-sass`ï¼Œ`build-ts`ï¼Œ`tslint`ï¼Œ`copy-static-assets`) |
| `serve`              | è¿è¡Œnode`dist/server.js`è¿™æ˜¯åº”ç”¨å…¥å£ç‚¹                                               |
| `watch-node`         | ä½¿ç”¨ nodemon è¿è¡Œnodeï¼Œä»¥ä¾¿åœ¨å´©æºƒæ—¶è¿›ç¨‹é‡æ–°å¯åŠ¨. ç”¨äºä¸»è¦ç›‘è§†ä»»åŠ¡                     |
| `watch`              | è¿è¡Œæ‰€æœ‰ç›‘è§†ä»»åŠ¡ (TypeScriptï¼ŒSassï¼ŒNode) . å¦‚æœæ‚¨æ²¡æœ‰è§¦åŠé™æ€èµ„äº§ï¼Œè¯·ä½¿ç”¨æ­¤é€‰é¡¹.       |
| `test`               | ä½¿ç”¨ Jest æµ‹è¯•è¿è¡Œå™¨è¿è¡Œæµ‹è¯•                                                         |
| `watch-test`         | åœ¨watchæ¨¡å¼ä¸‹è¿è¡Œæµ‹è¯•                                                                 |
| `build-ts`           | ç¼–è¯‘æ‰€æœ‰æº`.ts`æ–‡ä»¶åˆ°`dist`ä¸­çš„`.js`æ–‡ä»¶                                         |
| `watch-ts`           | ä¸`build-ts`ä¸€æ ·ä½†ä¸æ–­è§‚å¯Ÿ`.ts`æ–‡ä»¶ï¼Œå¹¶åœ¨éœ€è¦æ—¶é‡æ–°ç¼–è¯‘                             |
| `build-sass`         | ç¼–è¯‘æ‰€æœ‰`.scss`æ–‡ä»¶åˆ°`.css`æ–‡ä»¶                                                        |
| `watch-sass`         | ä¸`build-sass`ä¸€æ ·ä½†ä¸æ–­è§‚å¯Ÿ`.scss`æ–‡ä»¶ï¼Œå¹¶åœ¨éœ€è¦æ—¶é‡æ–°ç¼–è¯‘                         |
| `tslint`             | åœ¨é¡¹ç›®æ–‡ä»¶ä¸Šè¿è¡Œ TSLint                                                              |
| `copy-static-assets` | è°ƒç”¨å°† Js åº“ï¼Œå­—ä½“å’Œå›¾åƒå¤åˆ¶åˆ° dist ç›®å½•çš„è„šæœ¬                                        |
| `debug`              | æ‰§è¡Œå®Œæ•´ç‰ˆæœ¬ï¼Œç„¶åä»¥è§‚å¯Ÿæ¨¡å¼æä¾›åº”ç”¨ç¨‹åº                                              |
| `serve-debug`        | ä½¿ç”¨--inspect æ ‡å¿—è¿è¡Œåº”ç”¨ç¨‹åº                                                       |
| `watch-debug`        | åŒæ ·çš„`watch`ä½†åŒ…æ‹¬--inspect æ ‡å¿—ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥é™„åŠ è°ƒè¯•å™¨                               |

## ç±»å‹å®šä¹‰ (`.d.ts`) æ–‡ä»¶

TypeScript ä½¿ç”¨`.d.ts`æ–‡ä»¶ï¼Œæä¾›æ²¡ç”¨ TypeScript ç¼–å†™çš„ JavaScript åº“ç±»å‹. è¿™å¾ˆæ£’ï¼Œå› ä¸ºä¸€æ—¦ä½ æœ‰äº†`.d.ts`æ–‡ä»¶ï¼ŒTypeScript å¯ä»¥æ£€æŸ¥è¯¥åº“ç±»å‹ï¼Œå¹¶åœ¨ç¼–è¾‘å™¨ä¸­ä¸ºæ‚¨æä¾›æ›´å¥½çš„å¸®åŠ©. TypeScript ç¤¾åŒºä¸»åŠ¨åˆ†äº«æ‰€æœ‰æœ€æ–°çš„`.d.ts`ï¼Œè¿™ GitHub å­˜å‚¨åº“çš„æµè¡Œåº“ä¸º[DefinitelyTyped](https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types). ç¡®ä¿ä½ çš„`.d.ts`æ–‡ä»¶æ­£ç¡®è®¾ç½®éå¸¸é‡è¦ï¼Œå› ä¸ºä¸€æ—¦å®ƒä»¬åˆ°ä½ï¼Œæ‚¨å°±å¯ä»¥å…è´¹è·å¾—å¤§é‡é«˜è´¨é‡çš„ç±»å‹æ£€æŸ¥ (ä»¥åŠé”™è¯¯æ•è·ï¼ŒIntelliSense å’Œ å…¶ä»–ç¼–è¾‘å™¨å·¥å…·) .

> **æ³¨æ„!** å› ä¸ºæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨`"noImplicitAny": true`ï¼Œæˆ‘ä»¬è¦æ±‚æˆ‘ä»¬ä½¿ç”¨çš„ **ä¸€åˆ‡** åº“éƒ½æœ‰ä¸€ä¸ª`.d.ts` . è™½ç„¶ä½ å¯ä»¥è®¾ç½®`noImplicitAny`è‡³`false`æ²‰é»˜äº†å…³äº`.d.ts`æ–‡ä»¶å¤±è¸ªé”™è¯¯. ä½†æœ€å¥½çš„åšæ³•æ˜¯æ¯ä¸ªåº“éƒ½æœ‰`.d.ts`æ–‡ä»¶. (å³ä½¿æ˜¯`.d.ts`æ–‡ä»¶æ˜¯[åŸºæœ¬ æ²¡æœ‰!](#%E5%86%99%E4%B8%80%E4%B8%AAdts%E6%96%87%E4%BB%B6)

### ä» DefinitelyTyped å®‰è£…`.d.ts`

åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåœ¨ DefinitelyTyped ä¸Šä½ ä¼šå‘ç°æ‚¨ä½¿ç”¨åº“çš„`.d.ts`æ–‡ä»¶. è¿™äº›`.d.ts`ä½¿ç”¨`@types`å¯ä»¥è½»æ¾å®‰è£…åˆ°é¡¹ç›®ä¸­. ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ jQuery çš„`.d.ts`ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åš`npm install --save-dev @types/jquery`.

> **æ³¨æ„!**ä¸€å®šè¦æ·»åŠ `--save-dev` (è¦ä¹ˆ`-D`) åˆ°ä½ çš„`npm install`. `.d.ts`æ–‡ä»¶æ˜¯é¡¹ç›®ä¾èµ–é¡¹ï¼Œä½†ä»…åœ¨ç¼–è¯‘æ—¶ä½¿ç”¨ï¼Œå› æ­¤åº”è¯¥æ˜¯ dev ä¾èµ–é¡¹.

åœ¨è¿™ä¸ªæ¨¡æ¿ä¸­ï¼Œæ‰€æœ‰çš„`.d.ts`æ–‡ä»¶å·²æ·»åŠ åˆ°`package.json`ä¸­çš„`devDependencies`å­—æ®µï¼Œè¿™æ ·ä½ å°±å¯ä»¥åœ¨è¿è¡Œ`npm install`åèƒ½è·å¾—æ‰€éœ€çš„ä¸€åˆ‡. ä¸€æ—¦`.d.ts`æ–‡ä»¶å·²ç»å®‰è£…ï¼Œå®ƒä»¬ä¼šåœ¨`node_modules/@types`. å½“ è§£æ JavaScript åº“æ–‡ä»¶æ—¶ï¼Œç¼–è¯‘å™¨å°†å§‹ç»ˆåœ¨æ­¤æ–‡ä»¶å¤¹ä¸­æŸ¥æ‰¾`.d.ts`.

### å¦‚æœåº“ä¸åœ¨ DefinitelyTyped ä¸Šæ€ä¹ˆåŠ?

å¦‚æœæ‚¨å°è¯•å®‰è£…æ¥è‡ª`@types`çš„`.d.ts`æ–‡ä»¶ä½†æ‰¾ä¸åˆ°å®ƒï¼Œæˆ–è€…æ‚¨æ£€æŸ¥ DefinitelyTyped ä½†æ‰¾ä¸åˆ°ç‰¹å®šçš„åº“ï¼Œæ‚¨å°†éœ€è¦åˆ›å»ºè‡ªå·±çš„`.d.ts`åœ¨`src`ï¼Œä½ ä¼šæ‰¾åˆ°`types`æ–‡ä»¶å¤¹æœ‰`.d.ts`å´ä¸åœ¨ DefinitelyTyped ä¸Š (æˆ–è€…åœ¨æ’°å†™æœ¬æ–‡æ—¶å°šæœªå‡ºç°) .

#### è®¾ç½® TypeScript è¦æŸ¥æ‰¾çš„`.d.ts`æ˜¯åœ¨å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­

é»˜è®¤æƒ…å†µä¸‹, ç¼–è¯‘å™¨çŸ¥é“è¦æŸ¥çœ‹`node_modules/@types`ï¼Œä¸ºäº†å¯ä»¥å¸®åŠ©ç¼–è¯‘å™¨æ‰¾åˆ°æˆ‘ä»¬è‡ªå·±çš„`.d.ts`ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨`tsconfig.json`ä¸­é…ç½®è·¯å¾„æ˜ å°„. è·¯å¾„æ˜ å°„å¯èƒ½ä¼šè®©äººæ„Ÿåˆ°å›°æƒ‘ï¼Œ ä½†åŸºæœ¬æ€è·¯æ˜¯ TypeScript ç¼–è¯‘å™¨ åœ¨ è§£ææ¨¡å—æ—¶ ä¼šæŒ‰ ç‰¹å®šé¡ºåº æŸ¥çœ‹ ç‰¹å®šä½ç½®ï¼Œå¹¶ä¸”æˆ‘ä»¬èƒ½å¤Ÿå‘Šè¯‰ç¼–è¯‘å™¨ç¡®åˆ‡çš„æ“ä½œæ–¹æ³•. æ­¤é¡¹ç›®`tsconfig.json`ä¸­ï¼Œä½ ä¼šçœ‹åˆ°ä»¥ä¸‹å†…å®¹:

```json
"baseUrl": "."ï¼Œ
"paths": {
    "*": [
        "node_modules/*",
        "src/types/*"
    ]
}
```

è¿™å‘Šè¯‰ TypeScript ç¼–è¯‘å™¨ï¼Œæ¯æ¬¡è¿›æ¥ (`*`) é™¤äº†æŸ¥çœ‹`node_modules/@types`ï¼Œä¹Ÿçœ‹æˆ‘ä»¬è‡ªå·±`.d.ts`æ–‡ä»¶ä½ç½®`<baseUrl>`+`src/types/*`. æ‰€ä»¥å½“æˆ‘ä»¬å†™ä¸‹è¿™æ ·çš„ä¸œè¥¿:

```ts
import * as flash from 'express-flash';
```

é¦–å…ˆï¼Œç¼–è¯‘å™¨å°†å¯»æ‰¾ä¸€ä¸ª`d.ts`åœ¨`node_modules/@types`ï¼Œç„¶åå½“å®ƒæ²¡æœ‰æ‰¾åˆ°ï¼Œå®ƒåˆçœ‹`src/types`, å¹¶æ‰¾åˆ°æˆ‘ä»¬çš„æ–‡ä»¶`express-flash.d.ts`.

#### ä½¿ç”¨`dts-gen`

é™¤éä½ ç†Ÿæ‚‰`.d.ts`æ–‡ä»¶ï¼Œæˆ‘å¼ºçƒˆå»ºè®®å°è¯•ä½¿ç”¨è¯¥[dts-gen](https://github.com/Microsoft/dts-gen)å…ˆ. [README](https://github.com/Microsoft/dts-gen#dts-gen-a-typescript-definition-file-generator)å¾ˆå¥½åœ°è§£é‡Šäº†å¦‚ä½•ä½¿ç”¨è¯¥å·¥å…·ï¼Œå¹¶ä¸”åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨å°†è·å¾—ä¸€ä¸ªä¼˜ç§€çš„`.d.ts`æ¨¡ç‰ˆæ–‡ä»¶ä½œä¸ºå¼€å¤´. åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œ`bcrypt-nodejs.d.ts`ï¼Œ`fbgraph.d.ts`ï¼Œå’Œ`lusca.d.ts`éƒ½æ˜¯ä½¿ç”¨`dts-gen`ç”Ÿæˆçš„.

#### å†™ä¸€ä¸ª`.d.ts`æ–‡ä»¶

å¦‚æœä½¿ç”¨`dts-gen`ä¸èƒ½ç”Ÿæˆä¸€ä¸ª`.d.ts`ï¼Œ[é‚£ä¹ˆä½ åº”è¯¥å‘Šè¯‰æˆ‘](https://www.surveymonkey.com/r/LN2CV82)ï¼Œä½†æ˜¯ä½ å¯ä»¥åˆ›å»ºè‡ªå·±çš„`.d.ts`æ–‡ä»¶.

å½“ç„¶ï¼Œè‹¥æ‚¨åªæƒ³æš‚æ—¶ä½¿ç¼–è¯‘å™¨é™éŸ³ï¼Œè¯·åˆ›å»ºä¸€ä¸ªåä¸º`<some-library>.d.ts`æ–‡ä»¶ï¼Œåœ¨ä½ çš„`types`æ–‡ä»¶å¤¹ï¼Œå’Œæ·»åŠ ä»¥ä¸‹ä»£ç è¡Œ:

```ts
declare module '<some-library>';
```

å¦‚æœä½ æƒ³æŠ•å…¥ä¸€äº›æ—¶é—´æ¥åˆ›é€ ä¸€ä¸ªä¼Ÿå¤§çš„`.d.ts`æ–‡ä»¶ï¼Œå°†ä¸ºæ‚¨æä¾›å‡ºè‰²çš„ ç±»å‹æ£€æŸ¥å’Œ æ™ºèƒ½æç¤ºï¼ŒTypeScript ç½‘ç«™æœ‰éå¸¸æ£’çš„[`.d.ts`å†™ä½œæ–‡æ¡£](http://www.typescriptlang.org/docs/handbook/declaration-files/introduction.html).

#### è´¡çŒ® DefinitelyTyped

å®ƒå¾ˆå®¹æ˜“å˜å¾—å¾ˆæ£’çš„åŸå› ï¼Œæ˜¯å¤§å¤šæ•°åº“çš„`.d.ts`æ–‡ä»¶æœ‰åƒä½ è¿™æ ·çš„å¼€å‘äººå‘˜ï¼Œå°†ä»–ä»¬çš„å·¥ä½œè´¡çŒ®ç»™ DefinitelyTyped. è´¡çŒ®`.d.ts`æ–‡ä»¶æ˜¯è¿›å…¥å¼€æºç¤¾åŒºçš„å¥½æ–¹æ³•ï¼Œå¦‚æœå®ƒæ˜¯æ‚¨ä»¥å‰ä»æœªå°è¯•è¿‡çš„ä¸œè¥¿ï¼Œå¹¶ä¸”åªè¦æ‚¨çš„æ›´æ”¹è¢«æ¥å—ï¼Œä¸–ç•Œä¸Šçš„æ¯ä¸ªå…¶ä»–å¼€å‘äººå‘˜éƒ½å¯ä»¥è®¿é—®æ‚¨çš„å·¥ä½œ. 

å¦‚æœä½ æœ‰å…´è¶£è¯•ä¸€è¯•ï¼Œè¯·æŸ¥çœ‹[DefinitelyTyped å…¥é—¨](https://github.com/definitelyTyped/DefinitelyTyped/#how-can-i-contribute)
å¦‚æœä½ ä¸æ„Ÿå…´è¶£ï¼Œ[ä½ å¯ä»¥å‘Šè¯‰ why](https://www.surveymonkey.com/r/LN2CV82)ï¼Œä»¥æ­¤æˆ‘ä»¬å¯ä»¥å¸®åŠ©å°†æ¥æ›´è½»æ¾!

### ç®¡ç†`.d.ts`çš„æ€»ç»“

ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä½ åšæŒä»¥ä¸‹æ­¥éª¤ï¼Œä½ åªæœ‰æœ€å°çš„`.d.ts`é—®é¢˜;

1. åœ¨å®‰è£…ä»»ä½• npm è½¯ä»¶åŒ… ä½œä¸º ä¾èµ–é¡¹æˆ– dev ä¾èµ–é¡¹ åï¼Œç«‹å³å°è¯•å®‰è£…`.d.ts`é€šè¿‡`@types`

2. å¦‚æœ åº“ åœ¨ DefinitelyTyped ä¸Šæœ‰`.d.ts`ï¼Œå®‰è£…å°†æˆåŠŸï¼Œä½ å°±å®Œæˆäº†
   å¦‚æœç”±äºç¨‹åºåŒ…ä¸å­˜åœ¨è€Œå¯¼è‡´å®‰è£…å¤±è´¥ï¼Œè¯·ç»§ç»­æ‰§è¡Œæ­¥éª¤ 3.

3. ç¡®ä¿é¡¹ç›®æ˜¯å…·æœ‰[æä¾›ä½ è‡ªå®šä¹‰ `d.ts`æ–‡ä»¶çš„é…ç½®](#%E8%AE%BE%E7%BD%AEtypescript-%E8%A6%81%E6%9F%A5%E6%89%BE%E7%9A%84dts%E6%98%AF%E5%9C%A8%E5%8F%A6%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%AD).

4. å°è¯• [ç”¨ dts-gen ç”Ÿæˆ `.d.ts`](#%E4%BD%BF%E7%94%A8dts-gen)
   å¦‚æœæˆåŠŸï¼Œä½ å°±å®Œæˆäº†. å¦‚æœæ²¡æœ‰ï¼Œè¯·ç»§ç»­æ‰§è¡Œæ­¥éª¤ 5.

5. åˆ›å»ºä¸€ä¸ªåä¸º`<some-library>.d.ts`çš„æ–‡ä»¶åœ¨ä½ çš„`types`æ–‡ä»¶å¤¹.

6. æ·»åŠ ä»¥ä¸‹ä»£ç :

```ts
declare module '<some-library>';
```

7.  æ­¤æ—¶ï¼Œæ‰€æœ‰å†…å®¹éƒ½åº”è¯¥ç¼–è¯‘è€Œæ²¡æœ‰é”™è¯¯ï¼Œæ‚¨å¯ä»¥æ”¹è¿›`.d.ts`ä¸­çš„ç±»å‹æŒ‰ç…§[å†™ä½œ `.d.ts` æ–‡æ¡£](http://www.typescriptlang.org/docs/handbook/declaration-files/introduction.html)æˆ– ç»§ç»­æ²¡æœ‰ç±»å‹.

8.  å¦‚æœæ‚¨ä»ç„¶é‡åˆ°é—®é¢˜ï¼Œè¯·é€šè¿‡å‘é€ç”µå­é‚®ä»¶æˆ–åœ¨ Twitter ä¸Šå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šå¸®åŠ©æ‚¨.

## è°ƒè¯•

è°ƒè¯• TypeScript å°±åƒ è°ƒè¯• JavaScript ä¸€æ ·ï¼Œä½†æœ‰ä¸ªè­¦å‘Šï¼Œä½ éœ€è¦æºæ˜ å°„.

### æºæ˜ å°„

æºæ˜ å°„å…è®¸æ‚¨åœ¨ TypeScript æºä»£ç  ä¸­æ–­ç‚¹ï¼Œå½“ è¿è¡Œæ—¶æ­£åœ¨æ‰§è¡Œåˆ°çš„ JavaScriptï¼Œå‘½ä¸­è¯¥æ–­ç‚¹ï¼Œ

> **æ³¨æ„!** - æºæ˜ å°„ä¸æ˜¯TypeScript ç‰¹æœ‰çš„

ä»»ä½•æ—¶å€™ JavaScript éƒ½è¢«è½¬æ¢ (è½¬æ¢ï¼Œç¼–è¯‘ï¼Œä¼˜åŒ–ï¼Œç¼©å°ç­‰) ï¼Œä½ éƒ½éœ€è¦æºæ˜ å°„ï¼Œä»¥ä¾¿åœ¨è¿è¡Œæ‰§è¡Œçš„ä»£ç æ—¶å¯ä»¥*æ˜ å°„*å›åˆ°ç”Ÿæˆå®ƒçš„æºå¤´.

æºæ˜ å°„çš„æœ€å¥½çš„åœ°æ–¹æ˜¯åœ¨ä½ æ­£ç¡®é…ç½®åï¼Œæ‚¨ç”šè‡³ä¸çŸ¥é“å®ƒä»¬å­˜åœ¨! é‚£ä¹ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹æˆ‘ä»¬åœ¨è¿™ä¸ªé¡¹ç›®ä¸­å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹.

#### é…ç½®æºæ˜ å°„

é¦–å…ˆï¼Œä½ éœ€è¦ç¡®ä¿ä½ çš„å·²å¯ç”¨æºåœ°å›¾ç”Ÿæˆ: `tsconfig.json`

```json
"compilerOptions" {
    "sourceMap": true
}
```

å¯ç”¨æ­¤é€‰é¡¹åï¼ŒTypeScript ç¼–è¯‘å™¨è¾“å‡ºä¸€ä¸ª`.js`æ–‡ä»¶ï¼ŒåŒæ—¶è¾“å‡ºä¸€ä¸ª`.map.js`.è¿™ä¸ª`.map.js`æä¾›è°ƒè¯•æ—¶æ˜ å°„å›æº`.ts`æ–‡ä»¶.

> **æ³¨æ„!**. - ä¹Ÿå¯ä»¥ç”Ÿæˆ"å†…è”-inline"æºæ˜ å°„ï¼Œé€šè¿‡`"inlineSourceMap": true`

è¿™åœ¨ç¼–å†™å®¢æˆ·ç«¯ä»£ç æ—¶æ›´å¸¸è§ï¼Œå› ä¸ºæŸäº›æ†ç»‘å™¨éœ€è¦ å†…è”æºæ˜ å°„ æ¥ä¿ç•™æ†ç»‘çš„æ˜ å°„. å› ä¸ºæˆ‘ä»¬æ­£åœ¨ç¼–å†™ Node.js ä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¿…æ‹…å¿ƒè¿™ä¸€ç‚¹.

### åœ¨ VS Code ä¸­ä½¿ç”¨è°ƒè¯•å™¨

è°ƒè¯•æ˜¯ VS Code çœŸæ­£ä¼˜äºå…¶ä»–ç¼–è¾‘å™¨çš„åœ°æ–¹ä¹‹ä¸€.

VS Code ä¸­çš„ Node.js è°ƒè¯•å¾ˆå®¹æ˜“è®¾ç½®ï¼Œç”šè‡³æ›´å®¹æ˜“ä½¿ç”¨. è¯¥é¡¹ç›®é¢„å…ˆé…ç½®äº† æ‚¨å¼€å§‹ä½¿ç”¨ æ‰€éœ€çš„ä¸€åˆ‡.

å½“ä½ åœ¨ VS Code ä¸­ç‚¹å‡»`F5`ï¼Œå®ƒå¯»æ‰¾é¡¶çº§`.vscode`æ–‡ä»¶å¤¹çš„`launch.json`æ–‡ä»¶. åœ¨æ­¤æ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥å‡†ç¡®åœ°å‘Šè¯‰ VS Code æ‚¨è¦æ‰§è¡Œçš„æ“ä½œ:

```json
{
  "type": "node",
  "request": "attach",
  "name": "Attach by Process ID",
  "processId": "${command:PickProcess}",
  "protocol": "inspector"
}
```

è¿™ä¸"Node.js: Attach by Process ID"æ¨¡æ¿å¤§è‡´ç›¸åŒï¼Œåªæœ‰ä¸€ä¸ªå°çš„æ›´æ”¹.

æˆ‘ä»¬è¡¥å……`"protocol": "inspector"`ï¼Œå‘Šè¯‰ VS Code æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ Nodeï¼Œå®ƒä½¿ç”¨æ–°çš„è°ƒè¯•åè®®.

æœ‰äº†è¿™ä¸ªæ–‡ä»¶ï¼Œä½ å¯ä»¥ç‚¹å‡»`F5`å»å¯åŠ¨é™„åŠ è°ƒè¯•å™¨. æ‚¨å¯èƒ½ä¼šè¿è¡Œå¤šä¸ªnodeè¿›ç¨‹ï¼Œå› æ­¤æ‚¨éœ€è¦æ‰¾åˆ°æ˜¾ç¤º`node dist/server.js`çš„è¿›ç¨‹. ç°åœ¨åªéœ€è®¾ç½®æ–­ç‚¹å³å¯!

## æµ‹è¯•

å¯¹äºè¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘é€‰æ‹©äº†[Jest](https://facebook.github.io/jest/)

ä½œä¸ºæˆ‘ä»¬çš„æµ‹è¯•æ¡†æ¶. è™½ç„¶ Mocha å¯èƒ½æ›´å¸¸è§ï¼Œä½† Mocha ä¼¼ä¹æ­£åœ¨å¯»æ‰¾æ–°çš„ç»´æŠ¤è€…ï¼Œå¹¶ä¸”åœ¨ Jest ä¸­è®¾ç½® TypeScript æµ‹è¯• å¾ˆç®€å•.

### å®‰è£…ç»„ä»¶

è¦æ·»åŠ  TypeScript + Jest æ”¯æŒï¼Œè¯·å…ˆå®‰è£…å‡ ä¸ª npm åŒ…:

```
    npm install -D jest ts-jest
```

`jest`æ˜¯æµ‹è¯•æ¡†æ¶æœ¬èº«ï¼Œå’Œè¿™`ts-jest`åªæ˜¯ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œä½¿è¿è¡Œ TypeScript æµ‹è¯•æ›´å®¹æ˜“ä¸€äº›.

### é…ç½® Jest

Jest çš„é…ç½®å­˜åœ¨äº`jest.config.js`ï¼Œè®©æˆ‘ä»¬æ‰“å¼€å®ƒå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç :

```js
module.exports = {
  globals: {
    'ts-jest': {
      tsConfigFile: 'tsconfig.json'
    }
  }ï¼Œ
  moduleFileExtensions: ['ts'ï¼Œ 'js']ï¼Œ
  transform: {
    '^.+\\.(ts|tsx)$': './node_modules/ts-jest/preprocessor.js'
  }ï¼Œ
  testMatch: ['**/test/**/*.test.(ts|js)']ï¼Œ
  testEnvironment: 'node'
};
```

åŸºæœ¬ä¸Šæˆ‘ä»¬å‘Šè¯‰ Jest , æˆ‘ä»¬å¸Œæœ›å®ƒï¼Œä½¿ç”¨ æ¨¡å¼åŒ¹é… `"**/test/**/*.test.(ts|js)"` (æ‰€æœ‰`.test.ts`/`.test.js`æ–‡ä»¶åœ¨`test`æ–‡ä»¶å¤¹)ï¼Œä½†æ˜¯æˆ‘ä»¬æƒ³å…ˆé¢„å…ˆå¤„ç†`.ts`æ–‡ä»¶ã€‚
è¿™ä¸ªé¢„å¤„ç†æ­¥éª¤éå¸¸çµæ´»ï¼Œä½†åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åªæƒ³ä½¿ç”¨`tsconfig.json`å°† TypeScript ç¼–è¯‘ä¸º JavaScriptã€‚
è¿™ä¸€åˆ‡éƒ½å‘ç”Ÿåœ¨è¿è¡Œæµ‹è¯•çš„å†…å­˜ä¸­ï¼Œå› æ­¤æ²¡æœ‰è¾“å‡º`.js`æµ‹è¯•æ–‡ä»¶ä¾›æ‚¨ç®¡ç†ã€‚

### è¿è¡Œæµ‹è¯•

ç®€å•åœ°`npm run test`è¯·æ³¨æ„ï¼Œè¿™ä¹Ÿå°†ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š.

### å†™æµ‹è¯•

Web åº”ç”¨ç¨‹åºç¼–å†™æµ‹è¯•æœ‰ ä¸“é—¨çš„ä¹¦ç± å’Œ æœ€ä½³å®è·µ ,è¿™äº›ç§ç§éƒ½å¸¦æœ‰ä¸ªäººé£æ ¼çš„å¼ºçƒˆå½±å“ï¼Œæ‰€ä»¥æˆ‘æ•…æ„é¿å… åœ¨æœ¬æŒ‡å—ä¸­ è®¨è®º å¦‚ä½•æˆ–ä½•æ—¶ ç¼–å†™æµ‹è¯•. ä½†æ˜¯ï¼Œå¦‚æœ æµ‹è¯•çš„è¯´æ˜æ€§æŒ‡å¯¼ æ˜¯æ‚¨æ„Ÿå…´è¶£çš„[let me know](https://www.surveymonkey.com/r/LN2CV82)ï¼Œæˆ‘ä¼šåšä¸€äº›åŠŸè¯¾ï¼Œç„¶åå†å›å¤ä½ .

## TSLint

TSLint æ˜¯ä¸€ä¸ªä»£ç è§„èŒƒå™¨ï¼Œä¸»è¦å¸®åŠ©æ•è· æ¬¡è¦çš„ä»£ç è´¨é‡å’Œæ ·å¼é—®é¢˜. TSLint ä¸ ESLint æˆ– JSLint éå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯åœ¨æ„å»ºæ—¶è€ƒè™‘äº† TypeScript.

### TSLint è§„åˆ™

ä¸ å¤§å¤šæ•°è§„èŒƒ ä¸€æ ·ï¼ŒTSLint å…·æœ‰ä¸€ç³»åˆ—å¯é…ç½®çš„è§„åˆ™ä»¥åŠå¯¹è‡ªå®šä¹‰è§„åˆ™é›†çš„æ”¯æŒ. æ‰€æœ‰è§„åˆ™éƒ½é€šè¿‡`tslint.json`é…ç½®ã€‚
åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€å¥—ç›¸å½“åŸºæœ¬çš„è§„åˆ™ï¼Œæ²¡æœ‰å…¶ä»–è‡ªå®šä¹‰è§„åˆ™ã€‚
è¿™äº›è®¾ç½®ä¸»è¦åŸºäºæˆ‘ä»¬ç”¨äº å¼€å‘ TypeScript æœ¬èº« çš„ TSLint è®¾ç½®ã€‚

### è¿è¡Œ TSLint

ä¸æˆ‘ä»¬çš„å…¶ä»–æ„å»ºæ­¥éª¤ä¸€æ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨ npm è„šæœ¬ æ¥è°ƒç”¨ TSLint.è¦è¿è¡Œ TSLintï¼Œæ‚¨å¯ä»¥è°ƒç”¨ ä¸»æ„å»ºè„šæœ¬ æˆ– ä»…è°ƒç”¨ TSLint ä»»åŠ¡.

è¯·æ³¨æ„ï¼ŒTSLint ä¸æ˜¯ä¸»è¦ç›‘è§†ä»»åŠ¡çš„ä¸€éƒ¨åˆ†. åœ¨ç¼–å†™å‡½æ•°çš„è¿‡ç¨‹ä¸­ï¼ŒTSLint ä¼šä½¿ è¾“å‡ºçª—å£æ··ä¹±ï¼Œè¿™å¯èƒ½å¾ˆçƒ¦äººï¼Œå› æ­¤æˆ‘é€‰æ‹© ä»… åœ¨å®Œæ•´æ„å»ºæœŸé—´ è¿è¡Œå®ƒ.

```
    npm run build   // è¿è¡Œ å®Œæ•´æ„å»º, åŒ…æ‹¬ TSLint
    npm run tslint  // åªè¿è¡ŒTSLint
```

å¦‚æœæ‚¨æœ‰å…´è¶£å°½å¿«çœ‹åˆ° TSLint åé¦ˆï¼Œæˆ‘å¼ºçƒˆæ¨è[TSLint æ‰©å±• - VS Code]().

### VSCode æ‰©å±•

ä¸ºäº†åœ¨ VSCode ä¸­å·¥ä½œæ—¶å¢å¼ºæ‚¨çš„å¼€å‘ä½“éªŒï¼Œæˆ‘ä»¬è¿˜ä¸ºæ‚¨æä¾›äº†ä½¿ç”¨æ­¤é¡¹ç›®çš„å»ºè®®æ‰©å±•åˆ—è¡¨:

![VSCode æ‰©å±• å»ºè®®](https://user-images.githubusercontent.com/14539/34583539-6f290a30-f198-11e7-8804-30f40d418e20.png)

- [TSLint](https://marketplace.visualstudio.com/items?itemName=eg2.tslint)
- [Code Spell Checker](https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker)
- [Azure Cosmos DB](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-cosmosdb)
- [Azure App Service](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azureappservice)

# ä¾èµ–

é€šè¿‡`package.json`ç®¡ç†ä¾èµ–æ€§. åœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œæ‚¨å°†æ‰¾åˆ°ä¸¤ä¸ªéƒ¨åˆ†:

## `dependencies`

| Package           | æè¿°                              |
| ----------------- | --------------------------------- |
| async             | æä¾›å¼‚æ­¥æ§åˆ¶æµçš„å®ç”¨ç¨‹åºåº“.       |
| bcrypt-nodejs     | ç”¨äºæ•£åˆ—å’Œè…Œåˆ¶ç”¨æˆ·å¯†ç çš„åº“.       |
| bluebird          | Promise åº“                        |
| body-parser       | Express 4 ä¸­é—´ä»¶.                 |
| compression       | Express 4 ä¸­é—´ä»¶.                 |
| connect-mongo     | ç”¨äº Express çš„ MongoDB ä¼šè¯å­˜å‚¨. |
| dotenv            | ä».env æ–‡ä»¶åŠ è½½ç¯å¢ƒå˜é‡.          |
| errorhandler      | Express 4 ä¸­é—´ä»¶.                 |
| express           | Node.js web æ¡†æ¶.                 |
| express-flash     | ä¸º Express æä¾› Flash æ¶ˆæ¯.       |
| express-session   | Express 4 ä¸­é—´ä»¶.                 |
| express-validator | Express çš„ç®€å•è¡¨å•éªŒè¯.           |
| fbgraph           | Facebook Graph API åº“.            |
| lodash            | é€šç”¨å®ç”¨ç¨‹åºåº“.                   |
| lusca             | CSRF ä¸­é—´ä»¶.                      |
| mongoose          | MongoDB ODM.                      |
| nodemailer        | ç”¨äºå‘é€ç”µå­é‚®ä»¶çš„ Node.js åº“.    |
| passport          | node.js çš„ç®€å•è€Œä¼˜é›…çš„èº«ä»½éªŒè¯åº“  |
| passport-facebook | ä½¿ç”¨ Facebook æ’ä»¶ç™»å½•.           |
| passport-local    | ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç æ’ä»¶ç™»å½•.         |
| pug (jade)        | Express çš„æ¨¡æ¿å¼•æ“.               |
| request           | ç®€åŒ–çš„ HTTP è¯·æ±‚åº“.               |
| request-promise   | Promisified HTTP è¯·æ±‚åº“.          |
| winston           | è®°å½•æ—¥å¿—åº“                            |

## `devDependencies`

| Package      | æè¿°                                                        |
| ------------ | ----------------------------------------------------------- |
| @types       | æ­¤æ–‡ä»¶å¤¹ä¸­çš„æ˜¯ç”¨äºæä¾›ç±»å‹çš„`.d.ts`æ–‡ä»¶               |
| chai         | æµ‹è¯•å®ç”¨ç¨‹åºåº“ï¼Œä½¿ç¼–å†™æµ‹è¯•æ›´å®¹æ˜“                             |
| concurrently | ç®¡ç†å¤šä¸ªå¹¶å‘ä»»åŠ¡çš„å®ç”¨ç¨‹åº. ä¸ npm è„šæœ¬ä¸€èµ·ä½¿ç”¨             |
| jest         | æµ‹è¯• JavaScript çš„åº“.                                       |
| node-sass    | å…è®¸å°†.scss æ–‡ä»¶ç¼–è¯‘ä¸º.css                                  |
| nodemon      | åœ¨å´©æºƒæ—¶è‡ªåŠ¨é‡å¯nodeè¿›ç¨‹çš„å®ç”¨ç¨‹åº                          |
| supertest    | HTTP æ–­è¨€åº“.                                                |
| ts-jest      | å…·æœ‰æºæ˜ å°„æ”¯æŒçš„é¢„å¤„ç†å™¨ï¼Œä»¥å¸®åŠ©ä½¿ç”¨å¸¦æœ‰ Jest çš„ TypeScript. |
| ts-node      | å…è®¸ç›´æ¥è¿è¡Œ TS æ–‡ä»¶. ç”¨æ¥è¿è¡Œ`copy-static-assets.ts`         |
| tslint       | TypeScript æ–‡ä»¶çš„ Linter (ç±»ä¼¼äº ESLint)                    |
| typescript   | JavaScript ç¼–è¯‘å™¨/ç±»å‹æ£€æŸ¥å™¨ï¼Œå¯æé«˜ JavaScript ç”Ÿäº§åŠ›       |

è¦å®‰è£…æˆ–æ›´æ–°è¿™äº›ä¾èµ–é¡¹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`npm install`è¦ä¹ˆ`npm update`.

# é»‘å®¢é©¬æ‹‰æ¾ å…¥é—¨é¡¹ç›®

è¿™ä¸ªå¿«é€Ÿå…¥é—¨çš„å¤§éƒ¨åˆ†å†…å®¹ éƒ½æ˜¯ä» Sahatçš„ä¼˜ç§€å†…å®¹[Hackathon Starter project](https://github.com/sahat/hackathon-starter)ä¸­ è·å¾—å¯å‘æˆ–æ”¹ç¼– â€‹çš„.
